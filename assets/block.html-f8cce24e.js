import{_ as n,o as s,c as a,b as t}from"./app-a46f6870.js";const p={},e=t(`<h1 id="block-æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#block-æœºåˆ¶" aria-hidden="true">#</a> Block æœºåˆ¶</h1><p>å‰æ–‡è¯´åˆ°åœ¨compileé˜¶æ®µï¼ŒVue3é€šè¿‡å¯¹åŠ¨é™æ€åˆ†ætemplateè¾“å‡ºrenderå‡½æ•°ã€‚</p><p>åœ¨rendereré˜¶æ®µè°ƒç”¨renderç”ŸæˆVNodeï¼Œé‚£ä¹ˆåœ¨ç”ŸæˆVNodeæ—¶åˆåšäº†å“ªäº›ä¼˜åŒ–å‘¢ï¼Ÿ</p><h2 id="å¤§è‡´æµç¨‹æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#å¤§è‡´æµç¨‹æ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a> å¤§è‡´æµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ</h2><ol><li>è°ƒç”¨render</li><li>é¦–å…ˆæ‰“å¼€ä¸€ä¸ªblockï¼Œæ¥å­˜æ”¾å½“å‰blockçš„åŠ¨æ€VNode</li><li>æ ¹æ®compileé˜¶æ®µæ·»åŠ çš„patchFlagä»¥åŠå­èŠ‚ç‚¹çš„ç±»å‹ï¼ˆæ˜¯å­—ç¬¦ä¸²è¿˜æ˜¯æ•°ç»„ï¼‰æ¥æ·»åŠ ä¸åŒçš„ä¿¡æ¯ä½</li><li>å¦‚æœæœ€ç»ˆé›†åˆäº†å­èŠ‚ç‚¹çš„ä¿¡æ¯<code>patchFlag &gt; 0</code>æ—¶åˆ™ä¼šè¢«æ¨å…¥blockä¸­</li><li>å°†blockæ•°ç»„æ”¾åœ¨æ ¹VNodeçš„<code>dynamicChildren</code>å±æ€§ä¸Š</li></ol><h2 id="å¦‚ä½•æ ‡è®°ä¿¡æ¯ä½" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•æ ‡è®°ä¿¡æ¯ä½" aria-hidden="true">#</a> å¦‚ä½•æ ‡è®°ä¿¡æ¯ä½ï¼Ÿ</h2><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code>
<span class="token comment">// å¯ä»¥æ ¹æ®templateæ˜¯å¦æœ‰æ ¹èŠ‚ç‚¹ï¼Œåˆ†ä¸ºFragmentå’Œæ ¹ç»“ç‚¹</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token keyword">enum</span> PatchFlags <span class="token punctuation">{</span>
    <span class="token comment">// æ ‡è®°æ–‡æœ¬å†…å®¹æ˜¯åŠ¨æ€çš„</span>
    <span class="token constant">TEXT</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token comment">// æ ‡è®°classç»‘å®šæ˜¯åŠ¨æ€çš„</span>
    <span class="token constant">CLASS</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token comment">// æ ‡è®°è¡Œå†…styleç»‘å®šæ˜¯åŠ¨æ€çš„</span>
    <span class="token constant">STYLE</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token comment">// æ ‡è®°propsæ˜¯åŠ¨æ€çš„ï¼ŒVue2ä¸­çš„propså’Œevent handler åœ¨Vue3ä¸­å‡å½’çº³ä¸ºäº†props</span>
    <span class="token constant">PROPS</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token comment">// æ ‡è®°classã€styleã€propséƒ½æ˜¯åŠ¨æ€çš„ï¼Œæ‰€ä»¥diffæ—¶ç›´æ¥ç”¨æ–°èŠ‚ç‚¹æ›¿æ¢æ—§èŠ‚ç‚¹</span>
    <span class="token constant">FULL_PROPS</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">4</span><span class="token punctuation">,</span>
    <span class="token constant">HYDRATE_EVENTS</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token constant">STABLE_FRAGMENT</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">6</span><span class="token punctuation">,</span>
    <span class="token constant">KEYED_FRAGMENT</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">7</span><span class="token punctuation">,</span>
    <span class="token constant">UNKEYED_FRAGMENT</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">8</span><span class="token punctuation">,</span>
    <span class="token constant">NEED_PATCH</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">9</span><span class="token punctuation">,</span>
    <span class="token constant">DYNAMIC_SLOTS</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token constant">DEV_ROOT_FRAGMENT</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">11</span><span class="token punctuation">,</span>
    <span class="token constant">HOISTED</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token constant">BAIL</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">2</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°<code>patchFlag</code>æä¾›äº†ä¸€äº›æšä¸¾ï¼Œè¿™äº›æšä¸¾å€¼æ˜¯é€šè¿‡å·¦ç§»è®¡ç®—å‡ºçš„ã€‚</p><p>é‚£ä¹ˆä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾è®¡å‘¢ï¼Ÿ</p><p>æ¯”å¦‚å°æ˜<code>A</code>æ˜¯ä¸€ä¸ªä¸ä¼šä»»ä½•ç¼–ç¨‹è¯­è¨€çš„ç¨‹åºå‘˜ï¼Œç°åœ¨å¸‚é¢ä¸Šæœ‰ä»¥ä¸‹é›†ä¸­å˜æˆè¯­è¨€ï¼š</p><table><tbody><tr><th>PHP</th><th>Python</th><th>Rust</th><th>JavaScript</th><th>Java</th><th>C#</th><th>C++</th><th>C</th></tr><tr><th>0</th><th>0</th><th>0</th><th>0</th><th>0</th><th>0</th><th>0</th><th>0</th></tr></tbody></table><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">let</span> xiaoming <span class="token operator">=</span> <span class="token number">0</span>

<span class="token comment">// å½“ç„¶è¿™æ ·çš„å±æ€§åæ˜¯ä¸åˆç†çš„ï¼Œä½†æ˜¯ä¸ºäº†æ›´ç›´è§‚çš„è¯´æ˜æ‰å¦‚æ­¤å£°æ˜</span>
<span class="token keyword">const</span> languageFlag <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token constant">C</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;C++&#39;</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;C#&#39;</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">2</span><span class="token punctuation">,</span>
    Java<span class="token operator">:</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">3</span><span class="token punctuation">,</span>
    JavaScript<span class="token operator">:</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">4</span><span class="token punctuation">,</span>
    Rust<span class="token operator">:</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">5</span><span class="token punctuation">,</span>
    Python<span class="token operator">:</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">6</span><span class="token punctuation">,</span>
    <span class="token constant">PHP</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">7</span><span class="token punctuation">,</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><tbody><tr><td>C</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td style="color:red;">1</td></tr><tr><td>C++</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td style="color:red;">1</td><td>0</td></tr><tr><td>C#</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td style="color:red;">1</td><td>0</td><td>0</td></tr><tr><td>Java</td><td>0</td><td>0</td><td>0</td><td>0</td><td style="color:red;">1</td><td>0</td><td>0</td><td>0</td></tr><tr><td>JavaScript</td><td>0</td><td>0</td><td>0</td><td style="color:red;">1</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>Rust</td><td>0</td><td>0</td><td style="color:red;">1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>Python</td><td>0</td><td style="color:red;">1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>PHP</td><td style="color:red;">1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr></tbody></table><p>è¿™æ—¶å°æ˜é€šè¿‡è§†é¢‘ã€åšå®¢ç­‰å…¶ä»–å­¦ä¹ é€”å¾„ï¼Œç†Ÿç»ƒæŒæ¡äº†<code>JavaScript</code>ï¼Œé‚£ä¹ˆ</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code>xiaoming <span class="token operator">|=</span> languageFlag<span class="token punctuation">.</span>JavaScript
<span class="token comment">// output: xiaomingä¸º 16</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><table><tbody><tr><th>PHP</th><th>Python</th><th>Rust</th><th>JavaScript</th><th>Java</th><th>C#</th><th>C++</th><th>C</th></tr><tr><th>0</th><th>0</th><th>0</th><th style="color:red;">1</th><th>0</th><th>0</th><th>0</th><th>0</th></tr></tbody></table><p>è¿™æ—¶å°æ˜é€šè¿‡è§†é¢‘ã€åšå®¢ç­‰å…¶ä»–å­¦ä¹ é€”å¾„ï¼Œåˆç†Ÿç»ƒæŒæ¡äº†<code>Python</code>ï¼Œé‚£ä¹ˆ</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code>xiaoming <span class="token operator">|=</span> languageFlag<span class="token punctuation">.</span>Python
<span class="token comment">// output: xiaomingä¸º 80</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><tbody><tr><th>PHP</th><th>Python</th><th>Rust</th><th>JavaScript</th><th>Java</th><th>C#</th><th>C++</th><th>C</th></tr><tr><th>0</th><th style="color:red;">1</th><th>0</th><th style="color:red;">1</th><th>1</th><th>0</th><th>0</th><th>0</th></tr></tbody></table><p>é‚£ä¹ˆå¦‚ä½•åˆ¤æ–­å°æ˜å…·ä¸å…·å¤‡æŸä¸ªç¼–ç¨‹è¯­è¨€çš„èƒ½åŠ›å‘¢ï¼Ÿ</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>
<span class="token keyword">if</span> <span class="token punctuation">(</span>xiaoming <span class="token operator">&amp;</span> languageFlag<span class="token punctuation">.</span>Python<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;å°æ˜ä¼šPython&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;å°æ˜ä¸ä¼šPython&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>


<span class="token keyword">if</span> <span class="token punctuation">(</span>xiaoming <span class="token operator">&amp;</span> languageFlag<span class="token punctuation">.</span><span class="token constant">C</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;å°æ˜ä¼šC&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;å°æ˜ä¸ä¼šC&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// ---- output ----</span>
<span class="token comment">// å°æ˜ä¼šPython</span>
<span class="token comment">// å°æ˜ä¸ä¼šC</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‚£ä¹ˆåªéœ€è¦é€šè¿‡xiaomingè®°å½•çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥è½»æ¾çš„çŸ¥é“ä»–å¯ä»¥ç†Ÿç»ƒä½¿ç”¨å“ªäº›ç¼–ç¨‹è¯­è¨€ã€‚</p><p>å›åˆ°<code>patchFlag</code>ä¸Šï¼Œé€šè¿‡patchFlagä¸Šè®°å½•äº†åŠ¨æ€propså’Œå­èŠ‚ç‚¹çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥è½»è€Œæ˜“ä¸¾çš„çŸ¥é“åœ¨diffæ—¶ï¼Œ<strong>å“ªäº›VNodeéœ€è¦diff</strong>ã€<strong>éœ€è¦diffå“ªäº›props</strong>ã€‚</p><h2 id="ä¸¾ä¸ªğŸŒ°" tabindex="-1"><a class="header-anchor" href="#ä¸¾ä¸ªğŸŒ°" aria-hidden="true">#</a> ä¸¾ä¸ªğŸŒ°</h2><p>åœ¨ä¾‹å­ä¸­ä¸ºäº†æ›´å¥½ç†è§£ï¼Œæˆ‘ä»¬å°†æ ‡è®°äº†æ³¨é‡ŠèŠ‚ç‚¹ã€åŠ¨æ€æ–‡ä»¶èŠ‚ç‚¹ã€å…ƒç´ èŠ‚ç‚¹ã€åŠ¨æ€å…ƒç´ èŠ‚ç‚¹ç­‰</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- comment node --&gt;</span>
    text node{{name}}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>element node<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>dynamic nodeï¼š{{name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name?&#39;&#39;:&#39;&#39;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>div<span class="token punctuation">&#39;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onClick<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Hello World<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name?&#39;&#39;:&#39;&#39;<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name?&#39;&#39;:&#39;&#39;<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">onClick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript">onClick</span><span class="token punctuation">&quot;</span></span></span> <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        {{name}}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
                <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name?&#39;&#39;:&#39;&#39;<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name?&#39;&#39;:&#39;&#39;<span class="token punctuation">&quot;</span></span>
                <span class="token special-attr"><span class="token attr-name">onClick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript">onClick</span><span class="token punctuation">&quot;</span></span></span>
                <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            {{name}}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡compileè¾“å‡ºçš„renderå‡½æ•°ä¸ºï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
    createCommentVNode <span class="token keyword">as</span> _createCommentVNode<span class="token punctuation">,</span>
    toDisplayString <span class="token keyword">as</span> _toDisplayString<span class="token punctuation">,</span>
    createElementVNode <span class="token keyword">as</span> _createElementVNode<span class="token punctuation">,</span>
    normalizeClass <span class="token keyword">as</span> _normalizeClass<span class="token punctuation">,</span>
    normalizeStyle <span class="token keyword">as</span> _normalizeStyle<span class="token punctuation">,</span>
    createTextVNode <span class="token keyword">as</span> _createTextVNode<span class="token punctuation">,</span>
    openBlock <span class="token keyword">as</span> _openBlock<span class="token punctuation">,</span>
    createElementBlock <span class="token keyword">as</span> _createElementBlock
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>

<span class="token keyword">const</span> _hoisted_1 <span class="token operator">=</span> <span class="token comment">/*#__PURE__*/</span><span class="token function">_createElementVNode</span><span class="token punctuation">(</span><span class="token string">&quot;span&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;element node&quot;</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token comment">/* HOISTED */</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> _hoisted_2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;onClick&quot;</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> _hoisted_3 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> _hoisted_4 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">]</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">_ctx<span class="token punctuation">,</span> _cache<span class="token punctuation">,</span> $props<span class="token punctuation">,</span> $setup<span class="token punctuation">,</span> $data<span class="token punctuation">,</span> $options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token function">_openBlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">_createElementBlock</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
        <span class="token function">_createCommentVNode</span><span class="token punctuation">(</span><span class="token string">&quot; comment node &quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">_createTextVNode</span><span class="token punctuation">(</span><span class="token string">&quot; text node&quot;</span> <span class="token operator">+</span> <span class="token function">_toDisplayString</span><span class="token punctuation">(</span>_ctx<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token comment">/* TEXT */</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        _hoisted_1<span class="token punctuation">,</span>
        <span class="token function">_createElementVNode</span><span class="token punctuation">(</span><span class="token string">&quot;span&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;dynamic nodeï¼š&quot;</span> <span class="token operator">+</span> <span class="token function">_toDisplayString</span><span class="token punctuation">(</span>_ctx<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token comment">/* TEXT */</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">_createElementVNode</span><span class="token punctuation">(</span><span class="token string">&quot;span&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token keyword">class</span><span class="token operator">:</span> <span class="token function">_normalizeClass</span><span class="token punctuation">(</span>_ctx<span class="token punctuation">.</span>name <span class="token operator">?</span> <span class="token string">&#39;&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token comment">/* CLASS */</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">_createElementVNode</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;div&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">onClick</span><span class="token operator">:</span> _ctx<span class="token punctuation">.</span>onClick
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">,</span> <span class="token number">8</span> <span class="token comment">/* PROPS */</span><span class="token punctuation">,</span> _hoisted_2<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">_createElementVNode</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token keyword">class</span><span class="token operator">:</span> <span class="token function">_normalizeClass</span><span class="token punctuation">(</span>_ctx<span class="token punctuation">.</span>name <span class="token operator">?</span> <span class="token string">&#39;&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token function">_normalizeStyle</span><span class="token punctuation">(</span>_ctx<span class="token punctuation">.</span>name <span class="token operator">?</span> <span class="token string">&#39;&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token literal-property property">onClick</span><span class="token operator">:</span> <span class="token string">&quot;onClick&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">title</span><span class="token operator">:</span> _ctx<span class="token punctuation">.</span>name
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
            <span class="token function">_createTextVNode</span><span class="token punctuation">(</span><span class="token function">_toDisplayString</span><span class="token punctuation">(</span>_ctx<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token comment">/* TEXT */</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">_createElementVNode</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                <span class="token keyword">class</span><span class="token operator">:</span> <span class="token function">_normalizeClass</span><span class="token punctuation">(</span>_ctx<span class="token punctuation">.</span>name <span class="token operator">?</span> <span class="token string">&#39;&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token function">_normalizeStyle</span><span class="token punctuation">(</span>_ctx<span class="token punctuation">.</span>name <span class="token operator">?</span> <span class="token string">&#39;&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token literal-property property">onClick</span><span class="token operator">:</span> <span class="token string">&quot;onClick&quot;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">title</span><span class="token operator">:</span> _ctx<span class="token punctuation">.</span>name
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token function">_toDisplayString</span><span class="token punctuation">(</span>_ctx<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">15</span> <span class="token comment">/* TEXT, CLASS, STYLE, PROPS */</span><span class="token punctuation">,</span> _hoisted_4<span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">14</span> <span class="token comment">/* CLASS, STYLE, PROPS */</span><span class="token punctuation">,</span> _hoisted_3<span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// Check the console for the AST</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹æ¯”åå‘ç°ï¼Œå¯¹äºé™æ€çš„èŠ‚ç‚¹æ˜¯ç›´æ¥åšäº†ä½œç”¨åŸŸæå‡æ¥reuseï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥ä¸‹æ¥debuggerè·Ÿè¸ªè¿™äº›å‡½æ•°éƒ½åšäº†ä»€ä¹ˆï¼Ÿ</p><h3 id="openblock" tabindex="-1"><a class="header-anchor" href="#openblock" aria-hidden="true">#</a> _openBlock</h3><p>è¿™é‡Œé¦–å…ˆä¼šæ‰“å¼€ä¸€ä¸ªblockï¼Œæ ¹æ®å…¥å‚ä¸º<code>currentBlock</code>èµ‹å€¼å¹¶ä¸”æ¨å…¥<code>blockStack</code>ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„ä¸¤ä¸ªå…¨å±€å˜é‡ï¼š</p><ul><li>blockStackï¼šç±»å‹ä¸ºäºŒç»´æ•°ç»„<code>[[currentBlock1], [currentBlock2]]</code>ï¼Œæ¯ä¸ªitemå¯¹åº”currentBlock</li><li>currentBlockï¼šç±»å‹ä¸ºä¸€ç»´æ•°ç»„ï¼Œç”¨äºå­˜æ”¾å½“å‰blockä¸­çš„dynamic VNode</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// æ‰“å¼€ä¸€ä¸ªblockï¼Œå…¥å‚é»˜è®¤ä¸ºfalse</span>
<span class="token keyword">function</span> <span class="token function">openBlock</span><span class="token punctuation">(</span><span class="token parameter">disableTracking <span class="token operator">=</span> <span class="token boolean">false</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    blockStack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span>currentBlock <span class="token operator">=</span> disableTracking <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="createcommentvnode" tabindex="-1"><a class="header-anchor" href="#createcommentvnode" aria-hidden="true">#</a> _createCommentVNode</h3><p>é¡¾åæ€ä¹‰ï¼Œåˆ›å»ºä¸€ä¸ªæ³¨é‡ŠèŠ‚ç‚¹ç±»å‹çš„VNodeï¼Œå¿…å®šæ˜¯ä¸€ä¸ªé™æ€èŠ‚ç‚¹æ‰€ä»¥</p>`,35),o=[e];function c(l,i){return s(),a("div",null,o)}const r=n(p,[["render",c],["__file","block.html.vue"]]);export{r as default};
